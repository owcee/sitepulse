diff --git a/node_modules/tflite-react-native/android/build.gradle b/node_modules/tflite-react-native/android/build.gradle
index c925cf6..acc66b5 100644
--- a/node_modules/tflite-react-native/android/build.gradle
+++ b/node_modules/tflite-react-native/android/build.gradle
@@ -1,23 +1,24 @@
 
 buildscript {
     repositories {
-        jcenter()
+        google()
+        mavenCentral()
     }
 
     dependencies {
-        classpath 'com.android.tools.build:gradle:1.3.1'
+        classpath 'com.android.tools.build:gradle:7.4.2'
     }
 }
 
 apply plugin: 'com.android.library'
 
 android {
-    compileSdkVersion 23
-    buildToolsVersion "23.0.1"
+    compileSdkVersion 34
+    buildToolsVersion "34.0.0"
 
     defaultConfig {
-        minSdkVersion 16
-        targetSdkVersion 22
+        minSdkVersion 23
+        targetSdkVersion 34
         versionCode 1
         versionName "1.0"
     }
@@ -27,10 +28,11 @@ android {
 }
 
 repositories {
+    google()
     mavenCentral()
 }
 
 dependencies {
     implementation 'com.facebook.react:react-native:+'
-    implementation 'org.tensorflow:tensorflow-lite:+'
+    implementation 'org.tensorflow:tensorflow-lite:2.10.0'
 }
diff --git a/node_modules/tflite-react-native/android/src/main/java/com/reactlibrary/TfliteReactNativeModule.java b/node_modules/tflite-react-native/android/src/main/java/com/reactlibrary/TfliteReactNativeModule.java
index 1234567..abcdefg 100644
--- a/node_modules/tflite-react-native/android/src/main/java/com/reactlibrary/TfliteReactNativeModule.java
+++ b/node_modules/tflite-react-native/android/src/main/java/com/reactlibrary/TfliteReactNativeModule.java
@@ -75,6 +75,7 @@ public class TfliteReactNativeModule extends ReactContextBaseJavaModule {
   Interpreter tfLite;
   int inputSize = 0;
   Vector<String> labels = new Vector<String>();
+  int numLabels = 0;
 
   private Interpreter getTfLite() {
     return tfLite;
@@ -102,6 +103,7 @@ public class TfliteReactNativeModule extends ReactContextBaseJavaModule {
         while ((line = br.readLine()) != null) {
           labels.add(line);
         }
+        numLabels = labels.size();
         br.close();
       }
     }
@@ -168,8 +170,14 @@ public class TfliteReactNativeModule extends ReactContextBaseJavaModule {
     float threshold = (float) options.getDouble("threshold");
     int numResults = options.getInt("numResults");
 
-    // Output shape is [1, NUM_CLASSES] where NUM_CLASSES is the number of labels
-    float[][] labelProbArray = new float[1][labels.size()];
+    // Dynamically get output tensor shape from the model
+    int[] outputShape = tfLite.getOutputTensor(0).shape();
+    int outputSize = outputShape[outputShape.length - 1];
+    
+    // Use the model's actual output size, not the labels size
+    // This fixes the shape mismatch error when model outputs != labels count
+    float[][] labelProbArray = new float[1][outputSize];
+    
     tfLite.run(imgData, labelProbArray);
 
     PriorityQueue<WritableMap> pq =
